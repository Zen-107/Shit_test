<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gift Finder ‚Äì Homepage</title>
  <link rel="stylesheet" href="assets/css/index&dashboard.css" />
</head>

<body>
  <header class="navbar">
    <div class="container nav-content">
      <div class="logo">
        üéÅ <span>Gift Finder</span>
      </div>
      <nav class="nav-links">
        <a href="#">Find Gifts</a>
        <a href="#">Deals</a>
        <a href="#">Login</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="slideshow">
      <div class="slides-container">
        <div class="slide active">
          <img src="https://i0.wp.com/emle.org/wp-content/uploads/revslider/blog/demo-img-2.png?ssl=1">
        </div>
        <div class="slide">
          <img src="https://i0.wp.com/emle.org/wp-content/uploads/revslider/blog/demo-img-2.png?ssl=1">
        </div>
        <div class="slide">
          <img src="https://i0.wp.com/emle.org/wp-content/uploads/revslider/blog/demo-img-2.png?ssl=1">
        </div>
      </div>
      <button class="slide-btn prev" aria-label="Previous slide">‚ùÆ</button>
      <button class="slide-btn next" aria-label="Next slide">‚ùØ</button>
      <div class="dots">
        <span class="dot active" data-index="0"></span>
        <span class="dot" data-index="1"></span>
        <span class="dot" data-index="2"></span>
      </div>
    </section>

    <section class="hero container">
      <div class="hero-text">
        <h1>Find the perfect birthday gift</h1>
        <p>Choose gifts that match budget and personality.</p>
        <a class="btn" href="#">Start Gift Finder</a>
      </div>
    </section>

    <section class="section">
      <div class="container">
        <h2>Popular Picks</h2>
        <div id="popular" class="grid cards"></div>
      </div>
    </section>

  </main>

  <footer class="footer">
    <div class="footer-container">

      <div class="footer-columns">
        <div class="footer-col">
          <h4>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h4>
          <a href="#">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</a>
          <a href="#">‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</a>
          <a href="#">‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a>
          <a href="#">‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</a>
        </div>

        <div class="footer-col">
          <h4>‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠</h4>
          <a href="#">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</a>
          <a href="#">‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
          <a href="#">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢</a>
        </div>

        <div class="footer-col">
          <h4>‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h4>
          <a href="#">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a>
          <a href="#">‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠</a>
        </div>

        <div class="footer-col">
          <h4>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÄ‡∏£‡∏≤</h4>
          <div class="social-icons">
            <i>üìò</i>
            <i>üì∑</i>
            <i>‚ñ∂Ô∏è</i>
            <i>üê¶</i>
          </div>
        </div>
      </div>

      <div class="footer-copy">
        ¬© 2025 Gift Finder
      </div>

    </div>
  </footer>

  <script src="assets/js/app.js"></script> 

  <script>
document.addEventListener('DOMContentLoaded', async () => {
  const container = document.getElementById('popular');
  
  try {
    // üåê ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å API
    const response = await fetch('/api/get_all_products.php');
    
    if (!response.ok) {
      throw new Error(`HTTP ${response.status}: ${response.statusText}`);
    }

    const data = await response.json();
    
    if (!data.success) {
      throw new Error(data.error || '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ');
    }

    // ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (4 ‡∏ä‡∏¥‡πâ‡∏ô‡πÅ‡∏£‡∏Å)
    const items = data.data.slice(0, 8);
    container.innerHTML = items.map(p => `
      <div class="card">
        <img src="${p.image_url || 'https://via.placeholder.com/300x160?text=No+Image'}" alt="${p.name}" onerror="this.src='https://via.placeholder.com/300x160?text=Error'">
        <div class="card-body">
          <div class="badge">${p.categories[0] || 'Gift'}</div>
          <strong>${p.name}</strong>
          <div class="price">
            ${p.min_price !== null ? 
              (p.min_price === p.max_price ? 
                `${p.min_price.toLocaleString()} ${p.currency}` : 
                `${p.min_price.toLocaleString()}‚Äì${p.max_price.toLocaleString()} ${p.currency}`
              ) : 
              '‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠'}
          </div>
          <div>${p.description?.substring(0, 80) || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢'}...</div>
          <div class="stack">
            <a class="btn" href="product.html?id=${p.id}">View</a>
            ${p.external_urls && p.external_urls.length > 0 
              ? `<a class="btn secondary" href="${p.external_urls[0].url}" target="_blank">Buy</a>` 
              : `<a class="btn secondary" href="#" onclick="alert('Coming soon!'); return false;">Buy</a>`
            }
          </div>
        </div>
      </div>
    `).join('');

  } catch (error) {
    console.error('‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß:', error);
    
    // ‚ùó ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÅ‡∏ó‡∏ô
    container.innerHTML = `
      <div class="card" style="grid-column: 1 / -1; text-align: center; padding: 2rem;">
        <div>‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ</div>
        <div style="font-size: 0.9rem; color: #777; margin-top: 0.5rem;">
          ${error.message || '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á'}
        </div>
      </div>
    `;
  }
});
</script>

</body>

</html>
